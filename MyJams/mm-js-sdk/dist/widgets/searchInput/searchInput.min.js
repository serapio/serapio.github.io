!function(){"use strict";var e,t,n,s,r,i=window.MindMeldSearchInput=window.MindMeldSearchInput||{},a={"not-allowed":"Microphone access was denied. Please grant access and try again.","service-not-allowed":"Microphone access was denied. Please grant access and try again.","no-speech":"We did not hear you. Please try again.","speech-not-supported":"This browser does not support speech recognition"};i.initialize=function(a){e=a,t=e.querySelector(".mindmeld-search-text"),n=e.querySelector(".mindmeld-search-input"),s=e.querySelector(".mindmeld-message"),r=e.querySelector(".mindmeld-warning"),t.addEventListener("focus",function(){i.setFinal(!1)}),t.addEventListener("keypress",function(e){var n=e.keyCode;if(13===n){t.blur();var s=i.getText();i.setText(s,!0),i.emit("submitText",s),e.preventDefault()}}),t.addEventListener("click",function(){t.querySelector("span").focus()}),t.addEventListener("focusin",function(){t.classList.add("editing")}),t.addEventListener("focusout",function(){t.classList.remove("editing")}),s&&s.addEventListener("click",function(){n.classList.contains("prompt")||(i.clearAllMessage(),t.querySelector("span").focus())}),e.querySelector(".mindmeld-search-glass").addEventListener("click",function(){console.log("Clicking glass"),i.setFinal(!0);var e=i.getText();return i.emit("submitText",e),!1});var c=document.createElement("p");c.setAttribute("id","warning-message"),r&&r.appendChild(c);var o=document.createElement("div");o.setAttribute("id","close-warning");var l=document.createElement("a");l.setAttribute("id","close-warning-button"),o.appendChild(l),r&&r.appendChild(o),c.innerHTML='Your browser does not support speech input. Try using a&nbsp;<a id="supported-browser-link" href="http://caniuse.com/web-speech" target="_blank">supported browser.</a>',i.emit("init")},i.setFinal=function(e){e?t.classList.remove("interim"):t.classList.add("interim")},i.getText=function(){var e=t.querySelector("span").textContent;return e=e.replace(/&nbsp;/g," "),e.trim&&(e=e.trim()),e},i.setText=function(e,n){i.setFinal(n),t.querySelector("span").innerHTML=e},i.getErrorMessage=function(e){return a[e]},i.showPromptMessage=function(){i.setText("",!0),n.classList.remove("error"),n.classList.add("prompt"),s&&(s.innerHTML="Start speaking now...")},i.showErrorMessage=function(e){i.setText("",!0),n.classList.remove("prompt"),n.classList.add("error"),s&&(s.innerHTML=e)},i.clearPromptMessage=function(){n.classList.remove("prompt")},i.clearAllMessage=function(){n.classList.remove("prompt"),n.classList.remove("error")},i.showWarningMessage=function(){e.classList.add("no-speech"),e.classList.add("warning"),t.click(),r&&r.querySelector("a#close-warning-button").addEventListener("click",function(){e.classList.remove("warning"),t.click()})};var c={};i.on=function(e,t,n){c[e]||(c[e]=[]);var s={callback:t,context:n};c[e].push(s)},i.emit=function(e){var t=c[e];if(void 0!==t){var n=Array.prototype.slice.call(arguments,1);t.forEach(function(e){var t=e.context||this;e.callback.apply(t,n)})}}}();
//# sourceMappingURL=searchInput.min.js.map