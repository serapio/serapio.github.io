!function(){"use strict";window.navigator.getUserMedia=window.navigator.getUserMedia||window.navigator.webkitGetUserMedia||window.navigator.mozGetUserMedia||window.navigator.msGetUserMedia;var t=window.AudioContext||window.webkitAudioContext,e=window.Uint8Array,n=function(t){this.listener=t.listener,this.onError=t.onError,this.onVolumeChange=t.onVolumeChange,this.onStop=t.onStop,this.stream=null,this.context=null,this.analyzer=null,this.frequencies=null,this.times=null,this.audioStarted=!1};n.prototype.start=function(){function n(t){a.stream=t;var e=a.context.createMediaStreamSource(t);e.connect(a.analyzer),i()}function i(){return a.listener.pending||a.listener.listening?(a.analyzer.getByteFrequencyData(a.frequencies),a.analyzer.getByteTimeDomainData(a.times),a.onVolumeChange&&a.onVolumeChange(o()),window.setTimeout(i,75),void 0):(a.stop(),void 0)}function o(){return window.parseInt(r(0,a.analyzer.frequencyBinCount-1),10)}function r(t,e){for(var n=0,i=t;e>i;i++)n+=a.frequencies[i];return n/(e-t)}var a=this;this.audioStarted?i():(this.context=this.context||new t,this.analyzer=this.context.createAnalyser(),this.analyzer.smoothingTimeConstant=.18,this.analyzer.fftSize=256,this.frequencies=new e(this.analyzer.frequencyBinCount),this.times=new e(this.analyzer.frequencyBinCount),window.navigator.getUserMedia({audio:!0},n,function(t){a.onError("The following error occurred: "+t)}),this.audioStarted=!0)},n.prototype.stop=function(){this.onStop&&this.onStop(),this.stream&&this.stream.stop(),this.audioStarted=!1},window.VolumeMonitor=n}();
//# sourceMappingURL=volumeMonitor.min.js.map