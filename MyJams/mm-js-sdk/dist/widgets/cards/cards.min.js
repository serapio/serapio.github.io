!function(e,t,n){var a,o,r,i={},l=function(n,a){if(!n)throw new Error("render got invalid templateUrl: "+n+"; aborting.");if(l.tmplCache||(l.tmplCache={}),!l.tmplCache[n]){var o;t.ajax({url:n,method:"GET",async:!1,success:function(e){o=e}}),l.tmplCache[n]=e.compile(o)}return l.tmplCache[n](a,{helpers:i.handlebarsHelpers})},c=function(e,n){var a=t(i.cardSelector);a.length<=n?t(i.parentSelector).append(e):e.insertBefore(a[n])},s=function(e,n,r){var l,c,s=t(i.parentSelector).width(),d=e.outerWidth(!0),p=e.outerHeight(!0);r[e[0].id]={height:p,width:d};var u=Math.max(1,Math.floor(s/d));if(a=u*d,o=d,d>s)l=0,c=n*p;else if(l=n%u*d,c=0,n>=u)for(var f=t(i.cardSelector),h=n%u;n>h;h+=u)c+=r[f[h].id].height;return{top:c,left:l}},d=function(e,t,n){var a=50;e.css("z-index",a-t);var o=s(e,t,n);e.attr("new")?(e.attr("new",null),e.css("left",o.left+"px"),e.css("top",o.top+"px"),e.transition({opacity:1},i.animationDuration)):e.transition({left:o.left,top:o.top},i.animationDuration)},p={initialize:function(e){i=e,"animationDuration"in i||(i.animationDuration=500),t(window).resize(function(){(t(i.parentSelector).width()<a||t(i.parentSelector).width()>=a+o)&&p.layoutCards()});var n=t("<div>",{id:"no-result-message"});t(i.parentSelector).append(n)},setCards:function(e,n){console.log("Appending cards",e),t(i.parentSelector).removeClass("no-result"),e.forEach(function(e,a){var o=t("#"+e.documentid);if(o.length){var r=t(l(i.templatePath,e));r.css("left",o.css("left")),r.css("top",o.css("top")),o.replaceWith(r),r.imagesLoaded(function(){r.find(".not-loaded").removeClass("not-loaded")}),c(r,a)}else o=t(l(i.templatePath,e)),o.css("opacity",0),o.attr("new",!0),o.on("click",{card:e},function(e){return t(i.cardSelector).removeClass("selected"),o.addClass("selected"),n(e)}),o.imagesLoaded(function(){o.find(".not-loaded").removeClass("not-loaded")}),c(o,a)});for(var a=t(i.cardSelector),o=e.length;o<a.length;o++)t(a[o]).transition({opacity:0},i.animationDuration,function(){t(this).remove()});p.layoutCards(),t(i.cardSelector).imagesLoaded(function(){p.layoutCards()}),0===e.length&&t(i.parentSelector).addClass("no-result")},layoutCards:function(){var e={};t(i.cardSelector).each(function(n,a){d(t(a),n,e)})},setLoading:function(e){t(i.parentSelector).toggleClass("loading",e),e?r?r.spin(t(i.parentSelector)[0]):n&&(r=new n({length:60,width:15,top:"200px"}).spin(t(i.parentSelector)[0])):r&&r.stop()}};window.MindMeldCards=p}(Handlebars,jQuery,Spinner);
//# sourceMappingURL=cards.min.js.map